"use strict";(self.webpackChunkclient_sim=self.webpackChunkclient_sim||[]).push([[506],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return n?o.createElement(h,a(a({ref:t},d),{},{components:n})):o.createElement(h,a({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9574:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const i={id:"random-tips-&-performance-pointers",title:"Random Tips & Performance Pointers",hide_title:!0},a="Random Tips & Performance Pointers",s={unversionedId:"random-tips-&-performance-pointers",id:"random-tips-&-performance-pointers",title:"Random Tips & Performance Pointers",description:"This page contains a list of things to keep in mind while using Udon with U#.",source:"@site/docs/Random-Tips-&-Performance-pointers.md",sourceDirName:".",slug:"/random-tips-&-performance-pointers",permalink:"/random-tips-&-performance-pointers",draft:!1,editUrl:"https://github.com/vrchat-community/UdonSharp/edit/master/Tools/Docusaurus/docs/Random-Tips-&-Performance-pointers.md",tags:[],version:"current",frontMatter:{id:"random-tips-&-performance-pointers",title:"Random Tips & Performance Pointers",hide_title:!0},sidebar:"mainSidebar",previous:{title:"Editor Scripting",permalink:"/editor-scripting"},next:{title:"Runtime Exception Debugging",permalink:"/runtime-exception-debugging"}},l={},c=[{value:"Udon is slow",id:"udon-is-slow",level:3},{value:"Network event scoping",id:"network-event-scoping",level:3},{value:"SendCustomEvent &amp; method calls across behaviours",id:"sendcustomevent--method-calls-across-behaviours",level:3},{value:"Don&#39;t use collision ownership transfer on UdonBehaviours",id:"dont-use-collision-ownership-transfer-on-udonbehaviours",level:3},{value:"Avoid using GetComponent&lt;T&gt; frequently",id:"avoid-using-getcomponentt-frequently",level:3},{value:"U# script files must be connected to one and only one (1) UdonSharpProgramAsset",id:"u-script-files-must-be-connected-to-one-and-only-one-1-udonsharpprogramasset",level:3}],d={toc:c},p="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"random-tips--performance-pointers"},"Random Tips & Performance Pointers"),(0,r.kt)("p",null,"This page contains a list of things to keep in mind while using Udon with U#."),(0,r.kt)("h3",{id:"udon-is-slow"},"Udon is slow"),(0,r.kt)("p",null,"Do not expect to do a massive complex algorithm that iterates over thousands of elements. Udon can take on the order of 200x to 1000x longer to run a piece of code than the equivalent in normal C# depending on what you're doing. What this means is that if you're doing anything that iterates on Update, you probably shouldn't. Want to iterate over 40 GameObject's and rotate them? Do it in an animation instead. Just 40 iterations of something can often be enough to visibly impact frame rate on a decent computer. If there's any built-in Unity or VRC component that you could use to do a task you're considering using Udon for, use the component instead. If you must use Udon to do a lot of things at once, time slice your code where it's possible. And you will need to make compromises where it's just not viable to do something."),(0,r.kt)("h3",{id:"network-event-scoping"},"Network event scoping"),(0,r.kt)("p",null,"In order to send a CustomNetworkEvent, the target method must be ",(0,r.kt)("inlineCode",{parentName:"p"},"public"),". If it is not public, it will not fire. Additionally, as of VRChat 2020.4.4 any methods that start with an underscore such as ",(0,r.kt)("inlineCode",{parentName:"p"},"_MyLocalMethod")," will not receive network events. Generally for code readability, you should probably just keep any methods you don't want to get called from SendCustomNetworkEvent as ",(0,r.kt)("inlineCode",{parentName:"p"},"private"),". Put an underscore in front of the method name if you want a public method that's callable locally by other UdonSharpBehaviours, but not callable over the network."),(0,r.kt)("h3",{id:"sendcustomevent--method-calls-across-behaviours"},"SendCustomEvent & method calls across behaviours"),(0,r.kt)("p",null,"In order to call ",(0,r.kt)("inlineCode",{parentName:"p"},"SendCustomEvent")," on a method on an UdonBehaviour, the method must be marked ",(0,r.kt)("inlineCode",{parentName:"p"},"public")," similar to the network events. Additionally, calls across behaviours will be somewhat slower than local method calls due to how Udon handles SendCustomEvent which is used internally for those cases. When you can, prefer to keep similar behavior in one UdonSharpBehaviour rather than separating it into different behaviours."),(0,r.kt)("p",null,"Prefer to keep methods as private if they are not being called from other scripts. Due to how Udon searches for methods to call, the fewer public methods you have, the better performance-wise."),(0,r.kt)("h3",{id:"dont-use-collision-ownership-transfer-on-udonbehaviours"},"Don't use collision ownership transfer on UdonBehaviours"),(0,r.kt)("p",null,"Collision ownership transfer has been bugged for a long time, and will intermittently cause ownership transfer spam that lags out everyone in the world."),(0,r.kt)("h3",{id:"avoid-using-getcomponentt-frequently"},"Avoid using GetComponent\\<T",">"," frequently"),(0,r.kt)("p",null,"This is a general Unity best practice because GetComponent\\<T",">","() is slow, but it's especially true in Udon's case when you're using GetComponent to get an UdonSharpBehaviour type. This is because UdonSharp needs to insert a loop that checks all UdonBehaviours to make sure they're the correct UdonSharpBehaviour type. When you can, only use GetComponent on Start or on some event that happens infrequently."),(0,r.kt)("h3",{id:"u-script-files-must-be-connected-to-one-and-only-one-1-udonsharpprogramasset"},"U# script files must be connected to one and only one (1) UdonSharpProgramAsset"),(0,r.kt)("p",null,"UdonSharpProgramAssets are the Udon analogue to 1 script, do not change the script assigned to an UdonSharpProgramAsset after it is in use in a scene or you may experience weird issues."))}u.isMDXComponent=!0}}]);